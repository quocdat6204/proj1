{% extends "website/base.html" %}

{% block title %}Bookstore · Danh sách sách{% endblock %}

{% block content %}
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px;flex-wrap:wrap;">
        <div>
            <div style="font-size:20px;font-weight:600;margin-bottom:4px;">Khám phá thư viện sách</div>
            <div style="font-size:13px;color:#9ca3af;">Dữ liệu được lấy qua tầng Use Cases & Repository (Clean Architecture).</div>
        </div>
        <form method="get" style="display:flex;gap:8px;align-items:center;">
            <input type="text" name="q" placeholder="Tìm theo tiêu đề / tác giả..."
                   value="{{ query }}"
                   style="border-radius:999px;border:1px solid rgba(148,163,184,.4);background:rgba(15,23,42,.8);color:#e5e7eb;padding:6px 10px;font-size:13px;min-width:220px;">
            <button class="btn" type="submit">Tìm</button>
        </form>
    </div>

    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;">
        {% for book in books %}
            <a href="{% url 'website:book_detail' book.id %}"
               style="background:rgba(15,23,42,.96);border-radius:14px;padding:12px 12px 10px;border:1px solid rgba(148,163,184,.35);display:flex;flex-direction:column;justify-content:space-between;min-height:140px;">
                <div>
                    <div style="font-size:15px;font-weight:600;margin-bottom:4px;">{{ book.title }}</div>
                    <div style="font-size:12px;color:#9ca3af;margin-bottom:8px;">{{ book.author }}</div>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <div style="font-weight:600;color:#38bdf8;">{{ book.price }} đ</div>
                    {% if book.is_available %}
                        <span style="font-size:11px;color:#22c55e;">Còn: {{ book.stock }}</span>
                    {% else %}
                        <span style="font-size:11px;color:#f97373;">Hết hàng</span>
                    {% endif %}
                </div>
            </a>
        {% empty %}
            <div>Không có sách nào.</div>
        {% endfor %}
    </div>
{% endblock %}

